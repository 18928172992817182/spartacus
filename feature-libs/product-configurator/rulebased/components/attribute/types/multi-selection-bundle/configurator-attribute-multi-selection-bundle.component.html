<div
  id="{{ createAttributeIdForConfigurator(attribute) }}"
  *ngIf="attribute?.values?.length"
>
  <div
    class="cx-multi-selection-bundle-quantity"
    *ngIf="withQuantityOnAttributeLevel"
  >
    <cx-configurator-attribute-quantity
      (changeQuantity)="onChangeAttributeQuantity($event)"
      [allowZero]="!attribute.required"
      [initialQuantity]="attribute.quantity"
      [readonly]="readOnlyQuantity || (loading$ | async)"
    ></cx-configurator-attribute-quantity>

    <div
      class="cx-multi-selection-bundle-price"
      *ngIf="isAnyValueSelected(attribute)"
    >
      <cx-configurator-price
        *ngIf="withQuantityOnAttributeLevel"
        [formula]="setFormula(null)"
      ></cx-configurator-price>
    </div>
  </div>

  <cx-configurator-attribute-product-card
    id="{{ createAttributeValueIdForConfigurator(attribute, value.valueCode) }}"
    (handleDeselect)="onDeselect($event)"
    (handleQuantity)="onChangeValueQuantity($event)"
    (handleSelect)="onSelect($event)"
    *ngFor="let value of attribute.values"
    [preventAction]="preventAction$ | async"
    [product]="value"
    [multiSelect]="true"
    [withQuantity]="withQuantity"
  >
  </cx-configurator-attribute-product-card>
</div>
