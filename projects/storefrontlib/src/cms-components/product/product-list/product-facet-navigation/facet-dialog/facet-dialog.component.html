<div
  *ngIf="(facetList$ | async)?.facets as facets"
  [cxFocus]="{
    trap: requiresDialog,
    block: requiresDialog,
    focusOnEscape: requiresDialog,
    autofocus: requiresDialog ? 'cx-facet' : false
  }"
  (esc)="close.emit()"
>
  <h4 *ngIf="requiresDialog">
    {{ 'productList.filterBy.label' | cxTranslate }}
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="close.emit()"
    >
      <cx-icon aria-hidden="true" [type]="iconTypes.CLOSE"></cx-icon>
    </button>
  </h4>

  <!-- 
      Here we'd like to introduce configurable facet components, 
      either by using specific configuration or generic sproutlets 
  -->
  <!-- 
    the FocusDirective instance could be injected into FacetComponent, and vice-versa 
  -->
  <cx-facet
    *ngFor="let facet of facets"
    [facet]="facet"
    [class.expanded]="isExpanded(facet) | async"
    [cxFocus]="{ lock: true, trap: true, autofocus: 'a' }"
    (unlock)="expandFacetGroup(facet)"
  ></cx-facet>
</div>
