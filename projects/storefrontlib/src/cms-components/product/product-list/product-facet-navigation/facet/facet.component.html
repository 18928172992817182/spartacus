<cx-facet-heading [facet]="facet"></cx-facet-heading>

<ng-container *ngIf="state$ | async as state">
  <a
    #facetValue
    *ngFor="let value of facet.values | slice: 0:state.top"
    routerLink="./"
    [queryParams]="getLinkParams(value)"
    class="value"
    [class.selected]="value.selected"
    (click)="clickValueHandler(value, $event)"
    (keydown.enter)="clickValueHandler(value, $event)"
    [tabIndex]="getIndex(state)"
  >
    <span
      >{{ value.name }}<span class="count">{{ value.count }}</span></span
    >
  </a>

  <div class="more">
    <a
      *ngFor="let value of facet.values | slice: state.top:state.visible"
      routerLink="./"
      [queryParams]="getLinkParams(value)"
      class="value"
      [class.selected]="value.selected"
      [tabIndex]="getIndex(state)"
    >
      <span
        >{{ value.name }}<span class="count">{{ value.count }}</span></span
      >
    </a>
    <a
      *ngIf="state.visible > state.top"
      (click)="decreaseCount()"
      (keydown.enter)="decreaseCount()"
      (keydown.space)="decreaseCount()"
      [tabIndex]="getIndex(state)"
    >
      {{ 'productList.showLess' | cxTranslate }}
    </a>

    <a
      *ngIf="state.visible > 0 && state.visible < facet.values.length"
      (click)="increaseCount()"
      (keydown.enter)="increaseCount()"
      (keydown.space)="increaseCount()"
      [tabIndex]="getIndex(state)"
    >
      {{ 'productList.showMore' | cxTranslate }}
    </a>
  </div>
</ng-container>
