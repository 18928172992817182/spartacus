<div class="container">
  <div class="cx-body">
    <div>
      <label>{{ 'notificationPreference.message' | cxTranslate }}</label>
    </div>
    <ng-container *ngIf="(preferences$ | async) as preferences">
      <div
        class="cx-notification-preference-body"
        *ngIf="preferences.length > 0; else loading"
      >
        <ul
          class="cx-notification-preference-ul"
          *ngFor="let preference of preferences"
        >
          <ng-container *ngIf="preference.visible" class="cx-name">
            <li class="cx-notification-preference-li">
              <div class="form-check">
                <input
                  class="form-check-input"
                  role="switch"
                  type="checkbox"
                  [checked]="preference.enabled"
                  (change)="updatePreference(preference)"
                  [disabled]="(getNotificationPreferencesloading$ | async) || (updateNotificationPreferencesLoading$ | async)"
                />
              </div>
              <span class="cx-notification-preference-span"
                >{{
                  'notificationPreference.' + preference.channel | cxTranslate
                }}
                {{ preference.value }}
              </span>
            </li>
          </ng-container>
        </ul>
      </div>
    </ng-container>
    <div class="cx-notification-preference-note">
      <label
        ><b>{{ 'notificationPreference.note' | cxTranslate }}</b
        >{{ 'notificationPreference.noteMessage' | cxTranslate }}
      </label>
    </div>
    <ng-template #loading>
      <div class="cx-spinner">
        <cx-spinner></cx-spinner>
      </div>
    </ng-template>
  </div>
</div>
